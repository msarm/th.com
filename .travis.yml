language: ruby
rvm:
- 2.2
script:
- bundle exec jekyll build
after_success:
- git clone git@github.com:${GITHUB_REPO}
- cd $(basename ${GITHUB_REPO%.git})
- git config user.name "Travis CI"
- git config user.email ${EMAIL}
- rsync -az --delete --exclude '.git*' ../_site/ .
- touch .nojekyll
- git add -A .
- git commit -m "Generated Jekyll site by Travis CI - ${TRAVIS_BUILD_NUMBER}"
- git push --force "git@github.com${DEPLOY_KEY}:${GITHUB_REPO}" HEAD:${REPO_TARGET_BRANCH}
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - GITHUB_REPO: msarm/th.com.git
  - REPO_TARGET_BRANCH: gh-pages
  - secure: jTbtravis encrypt DEPLOY_KEY=token --addHdT2NZTLvnVyfrOmVrb5DL2foUqbCwWJSX3MMvX4KZ1W+e+lDWUzTn3Nca/Q0zT/9Ddu+DYf4/UpQjpqPhvghsEK+xewIruHuPrX0Xv+p2/tn6TLNRZqWI7pktcKYzCvRRM7uHWcs7zKD6cfjJw1BumWC4ACxZEESJgs4TqgfLLvt+P5iKaw7FEmtuwjAIztPtTnTkWYG5xw/XwP0YJ/VzBQJb7IAOTU2khqjbrIq7WgNx9nfYINLgXEO9T8WQUzhT2JHLIcpfHQADy1eUfDFqeld5ZuXRQ+DfyreXqFmg/LU8KfzKNU5f6JDHVa2gipup7H1e5aCji0VnzvPzKqM5XN+qzr35q3kE0AZAmnhCuIgz021lyxs0RycJhb5teBO4VoT+8AblISOPmvdaymdrHkK73YBd66MaN9z368qWGp13P6WZKMP4SCgxCD7K0bF0YUbdeeDK0VgaF978Y03t6A3FDegss/fzs4sRyENI8sRY2tYs3HTUtzKPSKbuhDM3Tp3+ideox7WphWgWTnzNVHDK/TmfkFANTZyRIeTrzni+qeabFoTPQjXoE44Vk0VgdqmqHWZOxS81KupHfslibQNyp5ISKg8cvIYjO13ViGenAuu6F1I0pjIG16CzEenvkmFDswn9bnCte6gKdouGLSQY/wEfy85xlYB8lg=
  - secure: q5+z8iNtAysCh+TpJ1hPW8WT12ix6wbWBpWtdMo5oJJ6a4xo7qTMYO+gXdsOPkELcqrUNW7kWqGbUPgfWI5H99ELsTjGrHbcqLdkgt995FtAKlOXTmiTd+PSc2YaFwMaQXy+Fj5nCr5h+iCcLO+GIqpG73emJZOP9NHUInbsNv8Y07ovQSZvEoSfd4eAp/imdF55LZl2p5jrm78Fj7ffTCbd72m1noPoxs7kvOu1VqEgDCw+T0e7ZdSbrvaDJn6Jv4+U7l+SeGdssofcP+zN01dFQsr853wtEvMS87RCd2tzzrJgE5wDs9c7jQO+QJUsfaAo7NhuSzt/GCS2tYUNSt0vVOXxWYiQPuONjXJwELICtZvKqgzVRNSBK/eRQv6HsxkMSfz2WGPC33Ib5lDl9MJb1Wc/Q6eGrWpyi+KPSA9Rcw/afMaaQg/qtpJplieXfoCsELdQi7C3HcFl52la4MkceGrAPCdzNyD8vsJHGqQQZKvpRuN+czsLkRkOR4gJYDDALFPgvmIJJsJW51kmoJxpoRKgdkZQMUlXhoEDk4jS5gA9UOFlrfP2gSG1KpinD5xm9cGW/KescR/KG2v7VNK1kZA1DF63KECzi6RLeQ/2F/Y9tCcwUsDf+Jv+BNmy39P8H+KsZNaAGCMXDA2oTUtVDc+jS6SP/y7MjacFky4=
